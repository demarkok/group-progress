# Прогресс решения задач на информатиксе

На занятиях по программированию я даю ученикам задание решать
задачи на [информатиксе](http://informatics.mccme.ru).
Для того, что отслеживать прогресс решения были написаны эти скрипты.

Основная цель — это создание страниц со статистикой решения задач на разные
темы. В директории example есть [пример](example/progress.html) такой страницы.
Её скриншот можно увидеть ниже.

![Скриншот страницы со статистикой](progress.png)

## Конфигурация

Для сбора статистики необходимо указать идентификаторы учеников и идентификаторы
задач на информатиксе. Пример конфигурационного файла:

```clojure
[{:id "prostokvashino",
  :name "Простоквашино",
  :users
  [{:name "Дядя Фёдор", :mccme 1}
   {:name "Печкин", :mccme 2}],
  :contests
  [{:name "Тема 1",
    :problems
    [{:mccme 3443, :name "Степень двойки."}
     {:mccme 3444, :name "Факториал."}]}
   {:name "Тема 2",
    :problems
    [{:mccme 3501, :name "Максимум двух чисел"}]}]}
 {:id "nez",
  :name "Незнайка и его друзья",
  :accept true,
  :users
  [{:name "Незнайка", :mccme 3}
   {:name "Тюбик", :mccme 4}],
  :contests
  [{:name "Тренировка 1",
    :problems
    [{:mccme 611, :name "Простые числа"}
     {:mccme 612, :name "Выражение"}
     {:mccme 613, :name "Возрастающая подпоследовательность"}]}]}]
```

В общем виде есть структуру можно описать так:

```
Конфигурация
  [первая-группа вторая-группа ...]
Группа
  {:id внутренний-идентификатор-группы
  :name имя-группы,
  :users [первый-участник второй-участник ...],
  :contests [первый-набор-задач второй-набор-задач ...]}
Участник
  {:name имя-участника :mccme идентификатор-на-информатиксе}
Набор задач
  {:name имя-набора
  :problems [первая-задача вторая-задача ...]}
Задача
  {:name название-задачи :mccme идентификатор-на-информатиксе}
```

У группы есть необязательный параметр :accept (см. пример группы
с Незнайкой). Он необходим, чтобоы различать решения, которые прошли
все тесты и имеют статус «OK» от решений, которые были просмотрены
учителем и имеют статус «Принято». Если параметр указан, то такие решения
отличаются визуально на итоговой странице.

Для удобства изменения конфигурации написан скрипт update-config.clj,
который позволяет в конфигурационном файле вместо полного описания задачи
указывать только идентификатор.

```clojure
[
{
  :id "prostokvashino",
  :name "Простоквашино", 
  :users
  [
    {:name "Дядя Фёдор", :mccme 1}
    {:name "Печкин", :mccme 2}
  ],
  :contests
  [
    {:name "Тема 1", :problems [3443 3444]}
    {:name "Тема 2", :problems [3501]}
  ]
}
{
  :id "nez",
  :name "Незнайка и его друзья",
  :accept true,
  :users
  [
    {:name "Незнайка", :mccme 3}
    {:name "Тюбик", :mccme 4}
  ],
  :contests
  [
    {:name "Тренировка 1",:problems [611 {:mccme 612, :name "Выражение"} 613]}
  ]
}
]
```

Запуск update-script создает новый файл с дополнительным расширением new в
котором идентификаторы задач заменены на словарь из идентификатора и имени. 

Пример запуска в Виндоус:

```
java -cp "src;target\lib\*" clojure.main update-config.clj example\preconfig.clj
```

В итоге создается файл example\preconfig.clj.new, в котором задачи имеют имена,
полученные с информатикса.


